<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MentalIA Premium - Transforme sua Sa√∫de Mental</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .premium-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .premium-header {
            text-align: center;
            padding: 2rem 1rem;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }

        .premium-logo {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .premium-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }

        .premium-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* Hero Section with Trial CTA */
        .hero-section {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2));
        }

        .hero-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .hero-description {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.95;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .trial-cta {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin-bottom: 1rem;
            position: relative;
            overflow: hidden;
        }

        .trial-cta:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(40, 167, 69, 0.6);
        }

        .trial-cta::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s;
        }

        .trial-cta:hover::before {
            left: 100%;
        }

        .trial-details {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 1rem;
        }

        /* Benefits Section */
        .benefits-section {
            padding: 4rem 0;
            background: rgba(255,255,255,0.05);
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 3rem;
        }

        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .benefit-card {
            background: rgba(255,255,255,0.1);
            padding: 2rem;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease;
        }

        .benefit-card:hover {
            transform: translateY(-5px);
        }

        .benefit-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .benefit-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .benefit-description {
            opacity: 0.9;
            line-height: 1.6;
        }

        /* Pricing Section */
        .pricing-section {
            padding: 4rem 0;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .pricing-card {
            background: rgba(255,255,255,0.15);
            border-radius: 20px;
            padding: 2.5rem;
            text-align: center;
            position: relative;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .pricing-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .pricing-card.popular {
            border: 2px solid #ffd700;
            transform: scale(1.05);
        }

        .popular-badge {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: #ffd700;
            color: #333;
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .plan-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .plan-price {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .plan-period {
            opacity: 0.8;
            margin-bottom: 1.5rem;
        }

        .plan-savings {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            display: inline-block;
        }

        .plan-features {
            list-style: none;
            margin-bottom: 2rem;
        }

        .plan-features li {
            padding: 0.5rem 0;
            position: relative;
            padding-left: 1.5rem;
        }

        .plan-features li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
        }

        .plan-button {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .plan-button.primary {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .plan-button.secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .plan-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        /* FAQ Section */
        .faq-section {
            padding: 4rem 0;
            background: rgba(255,255,255,0.05);
        }

        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .faq-item {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .faq-question {
            padding: 1.5rem;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s ease;
        }

        .faq-question:hover {
            background: rgba(255,255,255,0.05);
        }

        .faq-answer {
            padding: 0 1.5rem 1.5rem;
            opacity: 0.9;
            line-height: 1.6;
            display: none;
        }

        .faq-answer.active {
            display: block;
        }

        .faq-toggle {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .faq-toggle.active {
            transform: rotate(180deg);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 5% auto;
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            position: relative;
            animation: modalSlideIn 0.3s ease;
            color: white;
            text-align: center;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            font-size: 2rem;
            cursor: pointer;
            color: rgba(255,255,255,0.7);
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: white;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .modal-description {
            margin-bottom: 2rem;
            line-height: 1.6;
            opacity: 0.9;
        }

        .modal-trial-info {
            background: rgba(255,255,255,0.1);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .trial-countdown {
            font-size: 2rem;
            font-weight: 800;
            color: #ffd700;
            margin-bottom: 0.5rem;
        }

        .modal-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .modal-button {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-button.confirm {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .modal-button.cancel {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .modal-button:hover {
            transform: translateY(-2px);
        }

        /* Loading States */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid #fff;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.2rem;
            }

            .hero-description {
                font-size: 1.1rem;
            }

            .trial-cta {
                font-size: 1rem;
                padding: 0.8rem 2rem;
            }

            .benefits-grid,
            .pricing-grid {
                grid-template-columns: 1fr;
            }

            .pricing-card.popular {
                transform: none;
            }

            .modal-content {
                margin: 10% auto;
                width: 95%;
            }

            .modal-buttons {
                flex-direction: column;
            }
        }

        /* Pulse Animation for CTA */
        @keyframes pulse {
            0% {
                box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
            }
            50% {
                box-shadow: 0 8px 25px rgba(40, 167, 69, 0.8);
            }
            100% {
                box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
            }
        }

        .trial-cta.pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div class="premium-page">
        <!-- Header -->
        <header class="premium-header">
            <div class="premium-container">
                <h1 class="premium-logo">üß† MentalIA Premium</h1>
                <p class="premium-subtitle">Transforme sua sa√∫de mental com IA avan√ßada</p>
            </div>
        </header>

        <!-- Hero Section with Trial CTA -->
        <section class="hero-section">
            <div class="premium-container">
                <h2 class="hero-title">Comece Sua Jornada Premium</h2>
                <p class="hero-description">
                    Desbloqueie todo o potencial da sua sa√∫de mental com an√°lises personalizadas por IA, 
                    relat√≥rios detalhados e ferramentas exclusivas de bem-estar.
                </p>
                
                <button class="trial-cta pulse" id="startTrialBtn">
                    üéØ Come√ßar 7 Dias Gr√°tis por R$ 5,90/m√™s
                </button>
                
                <div class="trial-details">
                    <p>‚ú® Sem compromisso ‚Ä¢ Cancele quando quiser ‚Ä¢ Acesso total por 7 dias</p>
                </div>
            </div>
        </section>

        <!-- Benefits Section -->
        <section class="benefits-section">
            <div class="premium-container">
                <h2 class="section-title">Por que escolher o Premium?</h2>
                
                <div class="benefits-grid">
                    <div class="benefit-card">
                        <span class="benefit-icon">ü§ñ</span>
                        <h3 class="benefit-title">IA Avan√ßada</h3>
                        <p class="benefit-description">
                            An√°lises personalizadas com modelos de IA especializados em sa√∫de mental,
                            incluindo Claude 3.5 e Gemini Pro para insights profundos.
                        </p>
                    </div>

                    <div class="benefit-card">
                        <span class="benefit-icon">üìä</span>
                        <h3 class="benefit-title">Relat√≥rios Detalhados</h3>
                        <p class="benefit-description">
                            Relat√≥rios em PDF com an√°lise completa do seu humor, padr√µes comportamentais 
                            e recomenda√ß√µes personalizadas para melhoria cont√≠nua.
                        </p>
                    </div>

                    <div class="benefit-card">
                        <span class="benefit-icon">‚òÅÔ∏è</span>
                        <h3 class="benefit-title">Backup na Nuvem</h3>
                        <p class="benefit-description">
                            Sincroniza√ß√£o autom√°tica com Google Drive. Seus dados sempre seguros,
                            acess√≠veis e criptografados com tecnologia de ponta.
                        </p>
                    </div>

                    <div class="benefit-card">
                        <span class="benefit-icon">üìà</span>
                        <h3 class="benefit-title">An√°lise de Tend√™ncias</h3>
                        <p class="benefit-description">
                            Visualize padr√µes de longo prazo, identifique gatilhos e monitore 
                            seu progresso com gr√°ficos avan√ßados e estat√≠sticas detalhadas.
                        </p>
                    </div>

                    <div class="benefit-card">
                        <span class="benefit-icon">üéØ</span>
                        <h3 class="benefit-title">Recomenda√ß√µes Personalizadas</h3>
                        <p class="benefit-description">
                            Sugest√µes de atividades, exerc√≠cios de mindfulness e estrat√©gias 
                            de coping baseadas no seu perfil √∫nico e hist√≥rico de humor.
                        </p>
                    </div>

                    <div class="benefit-card">
                        <span class="benefit-icon">üîí</span>
                        <h3 class="benefit-title">Privacidade Total</h3>
                        <p class="benefit-description">
                            Seus dados permanecem 100% privados e criptografados. 
                            Processamento local quando poss√≠vel, sem compartilhamento com terceiros.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section class="pricing-section">
            <div class="premium-container">
                <h2 class="section-title">Escolha seu plano</h2>
                
                <div class="pricing-grid">
                    <div class="pricing-card">
                        <h3 class="plan-name">Mensal</h3>
                        <div class="plan-price">R$ 5,90</div>
                        <div class="plan-period">por m√™s</div>
                        
                        <ul class="plan-features">
                            <li>An√°lise IA completa</li>
                            <li>Relat√≥rios em PDF</li>
                            <li>Backup na nuvem</li>
                            <li>An√°lise de tend√™ncias</li>
                            <li>Suporte priorit√°rio</li>
                        </ul>
                        
                        <button class="plan-button secondary" data-premium-plan="monthly">
                            Assinar Mensal
                        </button>
                    </div>

                    <div class="pricing-card popular">
                        <div class="popular-badge">Mais Popular</div>
                        <h3 class="plan-name">Anual</h3>
                        <div class="plan-price">R$ 49,90</div>
                        <div class="plan-period">por ano</div>
                        <div class="plan-savings">Economize R$ 20,90</div>
                        
                        <ul class="plan-features">
                            <li>An√°lise IA completa</li>
                            <li>Relat√≥rios em PDF</li>
                            <li>Backup na nuvem</li>
                            <li>An√°lise de tend√™ncias</li>
                            <li>Suporte priorit√°rio</li>
                            <li><strong>2 meses gr√°tis!</strong></li>
                        </ul>
                        
                        <button class="plan-button primary" data-premium-plan="annual">
                            Assinar Anual
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="faq-section">
            <div class="premium-container">
                <div class="faq-container">
                    <h2 class="section-title">Perguntas Frequentes</h2>
                    
                    <div class="faq-item">
                        <div class="faq-question" data-faq="trial">
                            <span>Como funciona o per√≠odo de teste gratuito?</span>
                            <span class="faq-toggle">‚ñº</span>
                        </div>
                        <div class="faq-answer">
                            Voc√™ tem 7 dias completos para testar todas as funcionalidades Premium sem qualquer cobran√ßa. 
                            Ap√≥s o per√≠odo, ser√° cobrado automaticamente o valor mensal. Voc√™ pode cancelar a qualquer momento 
                            durante o teste sem custos.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" data-faq="cancel">
                            <span>Posso cancelar a qualquer momento?</span>
                            <span class="faq-toggle">‚ñº</span>
                        </div>
                        <div class="faq-answer">
                            Sim! Voc√™ pode cancelar sua assinatura a qualquer momento atrav√©s do portal do cliente. 
                            N√£o h√° taxas de cancelamento e voc√™ continuar√° tendo acesso Premium at√© o final do per√≠odo pago.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" data-faq="data">
                            <span>Meus dados est√£o seguros?</span>
                            <span class="faq-toggle">‚ñº</span>
                        </div>
                        <div class="faq-answer">
                            Absolutamente! Seus dados s√£o criptografados e processados localmente sempre que poss√≠vel. 
                            Utilizamos as melhores pr√°ticas de seguran√ßa e nunca compartilhamos informa√ß√µes pessoais com terceiros.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" data-faq="features">
                            <span>Quais s√£o as principais diferen√ßas do Premium?</span>
                            <span class="faq-toggle">‚ñº</span>
                        </div>
                        <div class="faq-answer">
                            O Premium inclui an√°lises IA avan√ßadas, relat√≥rios detalhados em PDF, backup autom√°tico na nuvem, 
                            an√°lise de tend√™ncias de longo prazo, recomenda√ß√µes personalizadas e suporte priorit√°rio.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" data-faq="upgrade">
                            <span>Posso mudar de plano depois?</span>
                            <span class="faq-toggle">‚ñº</span>
                        </div>
                        <div class="faq-answer">
                            Sim, voc√™ pode alternar entre planos mensal e anual a qualquer momento. 
                            Os ajustes de cobran√ßa s√£o feitos automaticamente e voc√™ ser√° notificado sobre as mudan√ßas.
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Trial Confirmation Modal -->
    <div id="trialModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" id="closeModal">&times;</span>
            
            <h2 class="modal-title">üéØ Iniciar Per√≠odo de Teste</h2>
            
            <div class="modal-description">
                <p>Voc√™ est√° prestes a iniciar seu <strong>teste gratuito de 7 dias</strong> do MentalIA Premium!</p>
            </div>
            
            <div class="modal-trial-info">
                <div class="trial-countdown" id="trialCountdown">7 dias</div>
                <p>de acesso completo ao Premium</p>
                <hr style="margin: 1rem 0; border: none; border-top: 1px solid rgba(255,255,255,0.3);">
                <p><strong>Ap√≥s o teste:</strong> R$ 5,90/m√™s</p>
                <p style="font-size: 0.9rem; opacity: 0.8;">Cancele quando quiser, sem compromisso</p>
            </div>
            
            <div class="modal-buttons">
                <button class="modal-button confirm" id="confirmTrial">
                    ‚ú® Sim, quero come√ßar!
                </button>
                <button class="modal-button cancel" id="cancelTrial">
                    Agora n√£o
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/storage.js?v=1141"></script>
    <script src="js/auth.js?v=1141"></script>
    <script src="js/mock-api.js?v=1150"></script>
    <script src="js/premium.js?v=1151"></script>

    <script>
        // Premium HTML JavaScript - Inline Implementation
        class PremiumPageManager {
            constructor() {
                this.trialActive = false;
                this.trialEndDate = null;
                this.init();
            }

            init() {
                console.log('üéØ Inicializando Premium Page Manager...');
                
                // Wait for DOM to be ready
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', () => this.setupEventListeners());
                } else {
                    this.setupEventListeners();
                }
                
                // Check for existing trial
                this.checkExistingTrial();
            }

            setupEventListeners() {
                // Trial CTA button
                const startTrialBtn = document.getElementById('startTrialBtn');
                if (startTrialBtn) {
                    startTrialBtn.addEventListener('click', () => this.openTrialModal());
                }

                // Modal controls
                const trialModal = document.getElementById('trialModal');
                const closeModal = document.getElementById('closeModal');
                const confirmTrial = document.getElementById('confirmTrial');
                const cancelTrial = document.getElementById('cancelTrial');

                if (closeModal) closeModal.addEventListener('click', () => this.closeTrialModal());
                if (cancelTrial) cancelTrial.addEventListener('click', () => this.closeTrialModal());
                if (confirmTrial) confirmTrial.addEventListener('click', () => this.startTrial());

                // Close modal on outside click
                if (trialModal) {
                    trialModal.addEventListener('click', (e) => {
                        if (e.target === trialModal) {
                            this.closeTrialModal();
                        }
                    });
                }

                // Regular plan buttons
                document.querySelectorAll('[data-premium-plan]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const plan = e.target.dataset.premiumPlan;
                        this.startRegularCheckout(plan);
                    });
                });

                // FAQ toggles
                document.querySelectorAll('.faq-question').forEach(question => {
                    question.addEventListener('click', () => this.toggleFAQ(question));
                });

                // Update trial countdown if active
                if (this.trialActive) {
                    this.startCountdown();
                }

                console.log('‚úÖ Event listeners configurados');
            }

            checkExistingTrial() {
                const trialData = localStorage.getItem('mentalia_trial');
                if (trialData) {
                    try {
                        const trial = JSON.parse(trialData);
                        const now = new Date().getTime();
                        
                        if (trial.endDate > now) {
                            this.trialActive = true;
                            this.trialEndDate = trial.endDate;
                            this.updateTrialUI();
                            console.log('üéØ Trial ativo encontrado');
                        } else {
                            localStorage.removeItem('mentalia_trial');
                            console.log('üéØ Trial expirado removido');
                        }
                    } catch (error) {
                        console.error('Erro ao verificar trial:', error);
                        localStorage.removeItem('mentalia_trial');
                    }
                }
            }

            openTrialModal() {
                const modal = document.getElementById('trialModal');
                if (modal) {
                    modal.style.display = 'block';
                    document.body.style.overflow = 'hidden';
                }
            }

            closeTrialModal() {
                const modal = document.getElementById('trialModal');
                if (modal) {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            }

            async startTrial() {
                try {
                    console.log('üéØ Iniciando trial...');
                    
                    // Show loading
                    const confirmBtn = document.getElementById('confirmTrial');
                    if (confirmBtn) {
                        confirmBtn.classList.add('loading');
                        confirmBtn.textContent = 'Iniciando...';
                    }

                    // Wait for premium manager
                    if (!window.premiumManager) {
                        await this.waitForPremiumManager();
                    }

                    if (!window.premiumManager) {
                        throw new Error('Sistema premium n√£o dispon√≠vel');
                    }

                    // Start Stripe checkout with trial
                    await this.startTrialCheckout();

                } catch (error) {
                    console.error('Erro ao iniciar trial:', error);
                    this.showError('Erro ao iniciar teste: ' + error.message);
                    
                    // Reset button
                    const confirmBtn = document.getElementById('confirmTrial');
                    if (confirmBtn) {
                        confirmBtn.classList.remove('loading');
                        confirmBtn.textContent = '‚ú® Sim, quero come√ßar!';
                    }
                }
            }

            async waitForPremiumManager() {
                let attempts = 0;
                const maxAttempts = 50;

                while (!window.premiumManager && attempts < maxAttempts) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                    attempts++;
                }

                return !!window.premiumManager;
            }

            async startTrialCheckout() {
                try {
                    // Use premium manager to start checkout with trial
                    // Note: Stripe trial will be configured in the backend
                    await window.premiumManager.startCheckout('monthly');
                    
                    // If successful, the premium system will handle the rest
                    this.closeTrialModal();
                    
                } catch (error) {
                    console.error('Erro no checkout do trial:', error);
                    throw error;
                }
            }

            async startRegularCheckout(plan) {
                try {
                    if (!window.premiumManager) {
                        await this.waitForPremiumManager();
                    }

                    if (!window.premiumManager) {
                        throw new Error('Sistema premium n√£o dispon√≠vel');
                    }

                    await window.premiumManager.startCheckout(plan);

                } catch (error) {
                    console.error('Erro no checkout:', error);
                    this.showError('Erro no pagamento: ' + error.message);
                }
            }

            toggleFAQ(questionElement) {
                const answer = questionElement.nextElementSibling;
                const toggle = questionElement.querySelector('.faq-toggle');

                if (answer.classList.contains('active')) {
                    answer.classList.remove('active');
                    toggle.classList.remove('active');
                    answer.style.display = 'none';
                } else {
                    // Close all other FAQs
                    document.querySelectorAll('.faq-answer.active').forEach(activeAnswer => {
                        activeAnswer.classList.remove('active');
                        activeAnswer.style.display = 'none';
                    });
                    
                    document.querySelectorAll('.faq-toggle.active').forEach(activeToggle => {
                        activeToggle.classList.remove('active');
                    });

                    // Open this FAQ
                    answer.classList.add('active');
                    toggle.classList.add('active');
                    answer.style.display = 'block';
                }
            }

            updateTrialUI() {
                if (!this.trialActive || !this.trialEndDate) return;

                const startTrialBtn = document.getElementById('startTrialBtn');
                if (startTrialBtn) {
                    const daysLeft = Math.ceil((this.trialEndDate - new Date().getTime()) / (1000 * 60 * 60 * 24));
                    startTrialBtn.textContent = `üéØ Trial Ativo - ${daysLeft} dias restantes`;
                    startTrialBtn.style.background = 'linear-gradient(45deg, #17a2b8, #20c997)';
                    startTrialBtn.classList.remove('pulse');
                }
            }

            startCountdown() {
                const updateCountdown = () => {
                    if (!this.trialActive || !this.trialEndDate) return;

                    const now = new Date().getTime();
                    const timeLeft = this.trialEndDate - now;

                    if (timeLeft <= 0) {
                        this.trialActive = false;
                        localStorage.removeItem('mentalia_trial');
                        location.reload();
                        return;
                    }

                    const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));

                    const countdownElement = document.getElementById('trialCountdown');
                    if (countdownElement) {
                        if (days > 0) {
                            countdownElement.textContent = `${days} dias`;
                        } else if (hours > 0) {
                            countdownElement.textContent = `${hours}h ${minutes}m`;
                        } else {
                            countdownElement.textContent = `${minutes} min`;
                        }
                    }
                };

                updateCountdown();
                setInterval(updateCountdown, 60000); // Update every minute
            }

            showError(message) {
                // Create a simple toast notification
                const toast = document.createElement('div');
                toast.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #dc3545;
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 10px;
                    z-index: 10000;
                    max-width: 300px;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                `;
                toast.textContent = message;
                document.body.appendChild(toast);

                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 5000);
            }

            showSuccess(message) {
                // Create a simple success toast
                const toast = document.createElement('div');
                toast.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #28a745;
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 10px;
                    z-index: 10000;
                    max-width: 300px;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                `;
                toast.textContent = message;
                document.body.appendChild(toast);

                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 5000);
            }
        }

        // Initialize Premium Page Manager
        window.premiumPageManager = new PremiumPageManager();

        // Listen for premium activation
        window.addEventListener('premiumActivated', (event) => {
            if (event.detail && event.detail.trial) {
                // Trial activated
                const endDate = new Date();
                endDate.setDate(endDate.getDate() + 7);
                
                localStorage.setItem('mentalia_trial', JSON.stringify({
                    startDate: new Date().getTime(),
                    endDate: endDate.getTime(),
                    plan: 'monthly'
                }));
                
                window.premiumPageManager.trialActive = true;
                window.premiumPageManager.trialEndDate = endDate.getTime();
                window.premiumPageManager.updateTrialUI();
                window.premiumPageManager.showSuccess('Trial de 7 dias ativado com sucesso! üéâ');
            }
        });

        // Check URL for premium status
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('premium') === 'success') {
            setTimeout(() => {
                window.premiumPageManager.showSuccess('Premium ativado com sucesso! Bem-vindo! üéâ');
            }, 1000);
        } else if (urlParams.get('premium') === 'cancelled') {
            setTimeout(() => {
                window.premiumPageManager.showError('Pagamento cancelado. Tente novamente quando quiser!');
            }, 1000);
        }

        console.log('üéØ Premium Page Manager carregado com sucesso!');
    </script>
</body>
</html>