<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste PWA MentalIA</title>
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <h1>Teste PWA MentalIA</h1>
    <div id="status"></div>
    <button onclick="testSW()">Testar Service Worker</button>
    <button onclick="testManifest()">Testar Manifest</button>

    <script>
        const status = document.getElementById('status');

        function log(message) {
            console.log(message);
            status.innerHTML += '<br>' + message;
        }

        function testSW() {
            log('ðŸ”§ Testando Service Worker...');

            if ('serviceWorker' in navigator) {
                log('âœ… Service Worker suportado');

                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        log('âœ… SW registrado: ' + registration.scope);
                        log('ðŸ“Š Estado: ' + (registration.active ? 'Ativo' : 'Instalando'));
                    })
                    .catch(error => {
                        log('âŒ Erro no registro: ' + error.message);
                    });
            } else {
                log('âŒ Service Worker nÃ£o suportado');
            }
        }

        function testManifest() {
            log('ðŸ“„ Testando Manifest...');

            fetch('manifest.json')
                .then(response => response.json())
                .then(manifest => {
                    log('âœ… Manifest carregado');
                    log('ðŸ“± Nome: ' + manifest.name);
                    log('ðŸ”— Start URL: ' + manifest.start_url);
                    log('ðŸŽ¨ Tema: ' + manifest.theme_color);
                })
                .catch(error => {
                    log('âŒ Erro no manifest: ' + error.message);
                });
        }

        // Testar automaticamente
        window.addEventListener('load', () => {
            log('ðŸš€ PÃ¡gina carregada');
            testManifest();
            setTimeout(testSW, 1000);
        });
    </script>
</body>
</html>