<!DOCTYPE html>
<html>
<head>
    <title>Test MentalIA Modules</title>
</head>
<body>
    <h1>ðŸ§ª Teste de MÃ³dulos MentalIA</h1>
    <div id="results"></div>
    
    <script src="js/debug.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/ai_analysis.js"></script>
    <script src="js/google_drive_backup.js"></script>
    
    <script>
        async function testModules() {
            const results = document.getElementById('results');
            
            function log(message, type = 'info') {
                const div = document.createElement('div');
                div.style.padding = '5px';
                div.style.margin = '2px';
                div.style.borderRadius = '4px';
                div.style.backgroundColor = type === 'error' ? '#ff6b6b' : type === 'success' ? '#51cf66' : '#339af0';
                div.style.color = 'white';
                div.textContent = message;
                results.appendChild(div);
            }
            
            // Test 1: Check if objects exist
            log('ðŸ” Verificando se objetos existem...');
            log(`window.mentalStorage: ${!!window.mentalStorage}`, window.mentalStorage ? 'success' : 'error');
            log(`window.aiAnalysis: ${!!window.aiAnalysis}`, window.aiAnalysis ? 'success' : 'error');
            log(`window.googleDriveBackup: ${!!window.googleDriveBackup}`, window.googleDriveBackup ? 'success' : 'error');
            
            // Test 2: Check AI methods
            if (window.aiAnalysis) {
                log('ðŸ¤– Verificando mÃ©todos de IA...');
                log(`generateReport: ${typeof window.aiAnalysis.generateReport}`, typeof window.aiAnalysis.generateReport === 'function' ? 'success' : 'error');
                log(`generateFastReport: ${typeof window.aiAnalysis.generateFastReport}`, typeof window.aiAnalysis.generateFastReport === 'function' ? 'success' : 'error');
                
                // Test 3: Try generating a simple report
                try {
                    log('ðŸ“Š Testando geraÃ§Ã£o de relatÃ³rio...');
                    const testEntries = [
                        { mood: 4, feelings: ['feliz'], diary: 'Teste', timestamp: new Date().toISOString() }
                    ];
                    const report = await window.aiAnalysis.generateReport(testEntries);
                    log('âœ… RelatÃ³rio gerado com sucesso!', 'success');
                    log(`Tamanho do relatÃ³rio: ${report.length} caracteres`);
                } catch (error) {
                    log(`âŒ Erro ao gerar relatÃ³rio: ${error.message}`, 'error');
                }
            }
            
            // Test 4: Check storage
            if (window.mentalStorage) {
                try {
                    log('ðŸ’¾ Testando storage...');
                    const entries = await window.mentalStorage.getAllMoodEntries();
                    log(`âœ… Storage acessado: ${entries.length} entradas`, 'success');
                } catch (error) {
                    log(`âŒ Erro no storage: ${error.message}`, 'error');
                }
            }
        }
        
        // Run tests after DOM loads
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(testModules, 2000);
        });
    </script>
</body>
</html>